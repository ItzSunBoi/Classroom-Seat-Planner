<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Seating Planner</title>

  <link rel="stylesheet" href="https://itzsunboi.github.io/Classroom-Seat-Planner/style.css">

  <script src="https://itzsunboi.github.io/Classroom-Seat-Planner/scripts.js" defer></script>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="title">
        <h1>Seating Planner</h1>
        <p>This entire page is pure magic. Front of room is the top of the grid.</p>
      </div>
      <div class="actions">
        <button id="btnSolve" class="primary">Solve</button>
        <button id="btnStep">Quick Improve</button>
        <button id="btnShuffle">Shuffle</button>
        <button id="btnExport">Export JSON</button>
        <button id="btnImport">Import JSON</button>
        <button id="btnReset" class="danger">Reset</button>
        <button id="btnEink">E‑Ink Preview</button>
      </div>
    </header>

    <div class="grid">
      <!-- LEFT: MAP -->
      <section class="card mapWrap">
        <div class="mapToolbar">
          <div class="toolgroup">
            <span class="pill"><strong>Map</strong> · edit tiles</span>
            <button class="toolBtn" data-tool="seat" aria-pressed="true">Seat</button>
            <button class="toolBtn" data-tool="blocked" aria-pressed="false">Blocked</button>
            <button class="toolBtn" data-tool="teacher" aria-pressed="false">Teacher</button>
            <button class="toolBtn" data-tool="empty" aria-pressed="false">Empty</button>
          </div>
          <div class="toolgroup">
            <label>Rows <input id="inpRows" type="number" min="1" max="40" value="8" /></label>
            <label>Cols <input id="inpCols" type="number" min="1" max="40" value="10" /></label>
            <label>Cell <input id="inpCell" type="number" min="28" max="64" value="42" /></label>
            <button id="btnResize">Resize Grid</button>
          </div>
        </div>

        <div class="status" style="margin-top:6px">
          <div class="kpi">
            <span class="pill">Seats: <strong id="kpiSeats">0</strong></span>
            <span class="pill">Pupils: <strong id="kpiPupils">0</strong></span>
            <span class="pill">Hard breaks: <strong id="kpiHard">0</strong></span>
            <span class="pill">Score: <strong id="kpiScore">0</strong></span>
          </div>
          <div class="mono" id="kpiMsg">Ready.</div>
        </div>

        <div id="map" class="map" aria-label="room grid"></div>
        <p class="hint">Tip: Click tiles to paint. Seats are where pupils can sit. Teacher tiles let you add distance-to-teacher rules. </p>
      </section>

      <!-- RIGHT: DATA + RULES -->
      <aside class="card split">
        <div>
          <h2>Pupils</h2>
          <div class="row" style="justify-content:space-between;margin-bottom:10px">
            <div class="row">
              <input id="inpPupilId" type="text" placeholder="ID (e.g., A12)" />
              <input id="inpPupilTags" type="text" placeholder="tags (comma)" />
              <button id="btnAddPupil">Add</button>
            </div>
            <button id="btnAutoFill">Demo Pupils</button>
          </div>
          <textarea id="txtPupils" spellcheck="false"></textarea>
          <p class="small">Format: JSON array of pupils: <span class="mono">[{"id":"A","tags":["needs_front"],"fixed":null}]</span>. Fixed can be <span class="mono">{"seat":"S1_0"}</span> or <span class="mono">{"r":1,"c":0}</span>.</p>
        </div>

        <div>
          <h2>Rules</h2>
          <div class="twoCol" style="margin-bottom:10px">
            <div>
              <label>Quick rule template</label><br/>
              <select id="selRuleTpl">
                <option value="mindist">Min distance (A from B)</option>
                <option value="maxdist">Max distance (A near B)</option>
                <option value="notadj">Not adjacent</option>
                <option value="preferfront">Prefer front rows</option>
                <option value="awayteacher">Away from teacher</option>
                <option value="tagsep">Spread tag group</option>
                <option value="mustrows">Must be within rows</option>
              </select>
            </div>
            <div>
              <label>&nbsp;</label><br/>
              <button id="btnAddRule">Add rule</button>
            </div>
          </div>

          <textarea id="txtRules" spellcheck="false"></textarea>
          <p class="small">Rules are JSON objects. Each rule supports <span class="mono">hard</span> and <span class="mono">weight</span>. Hard violations dominate the score.</p>
        </div>

        <div>
          <h2>Solver settings</h2>
          <div class="row" style="gap:10px">
            <label>Restarts <input id="inpRestarts" type="number" min="1" max="80" value="25" /></label>
            <label>Iters/restart <input id="inpIters" type="number" min="100" max="300000" value="25000" /></label>
            <label>Start T <input id="inpT0" type="number" min="0.1" step="0.1" value="6.0" /></label>
            <label>End T <input id="inpT1" type="number" min="0.001" step="0.01" value="0.05" /></label>
            <label>Seed <input id="inpSeed" type="number" min="0" value="12345" /></label>
          </div>
          <p class="hint" style="margin-top:10px">“Quick Improve” runs a short optimisation pass without restarts. Use it after manual tweaks.</p>
        </div>
      </aside>
    </div>
  </div>

  <div id="toast" class="toast" role="status" aria-live="polite"></div>
</body>
</html>
